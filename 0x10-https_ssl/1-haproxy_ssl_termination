global
	log /dev/log local0
	log /dev/log local1 notice
	chroot /var/lib/haproxy
	stats socket /run/haproxy/admin.sock mode 600 level admin expose-fd listeners
	stats timeout 30s
	user haproxy
	group haproxy
	daemon

defaults
	log global
	mode http
	option httplog
	option dontlognull
	timeout connect 5000
	timeout client 50000
	timeout server 50000

frontend ysg_front_https
	bind *:443 ssl crt /etc/letsencrypt/live/www.holberton.online/fullchain.pem
	reqadd X-Forwarded-Proto:\ https
	acl is_holberton hdr_end(host) -i www.holberton.online
	default_backend ysg_back

backend ysg_back
	balance roundrobin
	server 442150-web-01 54.237.74.212:443 ssl check
	server 442150-web-02 100.25.159.153:443 ssl check
